{"remainingRequest":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/node_modules/babel-loader/lib/index.js!/Users/yovel/Desktop/sprint 4/Spotifood/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yovel/Desktop/sprint 4/Spotifood/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yovel/Desktop/sprint 4/Spotifood/frontend/src/views/groups.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/src/views/groups.vue","mtime":1553943114505},{"path":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport GroupList from \"../components/groups/group-list-cmp\";\nimport groupStore from \"../store/group-store.js\";\nimport FilterGroup from \"../components/groups/filter-cmps/filterGroups-cmp.vue\";\nimport LoadingCmp from \"../components/loading-cmp.vue\";\nimport GroupPreview from \"../components/groups/group-preview-cmp\";\nexport default {\n  components: {\n    LoadingCmp: LoadingCmp,\n    GroupList: GroupList,\n    FilterGroup: FilterGroup,\n    GroupPreview: GroupPreview\n  },\n  data: function data() {\n    return {\n      loadedGroups: false,\n      currLoc: null,\n      nearbyGroups: null\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    this.$store.dispatch({\n      type: \"getGroups\"\n    }).then(function () {\n      setTimeout(function () {\n        _this.loadedGroups = true;\n      }, 1000);\n\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(function (_ref) {\n          var coords = _ref.coords;\n          _this.currLoc = {\n            lat: coords.latitude,\n            lng: coords.longitude\n          };\n          console.log(\"currLoc\", _this.currLoc);\n          console.log(_this.$store.getters.groups);\n\n          var nearby = _this.$store.getters.groups.filter(function (group) {\n            var dist = _this.getDistanceFromLatLonInKm(_this.currLoc.lat, _this.currLoc.lng, group.location.lat, group.location.lng);\n\n            console.log(\"distance:\", dist);\n            return dist < 80;\n          });\n\n          console.log(\"nearby groups are\", nearby);\n          _this.nearbyGroups = nearby;\n        });\n      }\n    });\n  },\n  computed: {\n    groups: function groups() {\n      return this.$store.getters.groups;\n    }\n  },\n  methods: {\n    filter: function filter(filterBy) {\n      this.$store.dispatch({\n        type: \"filterGroups\",\n        filterBy: filterBy\n      });\n    },\n    getDistanceFromLatLonInKm: function getDistanceFromLatLonInKm(lat1, lon1, lat2, lon2) {\n      var R = 6371; // Radius of the earth in km\n\n      var dLat = this.deg2rad(lat2 - lat1); // deg2rad below\n\n      var dLon = this.deg2rad(lon2 - lon1);\n      var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(this.deg2rad(lat1)) * Math.cos(this.deg2rad(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n      var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n      var d = R * c; // Distance in km\n\n      return d;\n    },\n    deg2rad: function deg2rad(deg) {\n      return deg * (Math.PI / 180);\n    }\n  }\n};",{"version":3,"sources":["groups.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <section>\n    <div data-aos=\"fade-down\" data-aos-duration=\"900\" class=\"filter-container\">\n      <FilterGroup @filter=\"filter\"></FilterGroup>\n    </div>\n    <div v-if=\"nearbyGroups && nearbyGroups.length\" class=\"groups-previews\">\n      <h1>Come by!</h1>\n      <h3>Events Near You</h3>\n      <div class=\"group-container\">\n        <GroupPreview v-for=\"group in nearbyGroups\" :key=\"group._id\" :group=\"group\"></GroupPreview>\n      </div>\n      <hr>\n    </div>\n    <LoadingCmp v-if=\"!loadedGroups || !nearbyGroups && !nearbyGroups.length\"></LoadingCmp>\n    <div v-if=\"loadedGroups\" class=\"group-list-container\">\n      <h1>Try Something New</h1>\n      <GroupList :groups=\"groups\"></GroupList>\n    </div>\n  </section>\n</template>\n\n<script>\nimport GroupList from \"../components/groups/group-list-cmp\";\nimport groupStore from \"../store/group-store.js\";\nimport FilterGroup from \"../components/groups/filter-cmps/filterGroups-cmp.vue\";\nimport LoadingCmp from \"../components/loading-cmp.vue\";\nimport GroupPreview from \"../components/groups/group-preview-cmp\";\n\nexport default {\n  components: {\n    LoadingCmp,\n    GroupList,\n    FilterGroup,\n    GroupPreview\n  },\n  data() {\n    return {\n      loadedGroups: false,\n      currLoc: null,\n      nearbyGroups: null\n    };\n  },\n  created() {\n    this.$store.dispatch({ type: \"getGroups\" }).then(() => {\n      setTimeout(() => {\n        this.loadedGroups = true;\n      }, 1000);\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(({ coords }) => {\n          this.currLoc = {\n            lat: coords.latitude,\n            lng: coords.longitude\n          };\n          console.log(\"currLoc\", this.currLoc);\n          console.log(this.$store.getters.groups);\n          let nearby = this.$store.getters.groups.filter(group => {\n            let dist = this.getDistanceFromLatLonInKm(\n              this.currLoc.lat,\n              this.currLoc.lng,\n              group.location.lat,\n              group.location.lng\n            );\n            console.log(\"distance:\", dist);\n            return dist < 80;\n          });\n          console.log(\"nearby groups are\", nearby);\n          this.nearbyGroups = nearby;\n        });\n      }\n    });\n  },\n  computed: {\n    groups() {\n      return this.$store.getters.groups;\n    }\n  },\n  methods: {\n    filter(filterBy) {\n      this.$store.dispatch({ type: \"filterGroups\", filterBy });\n    },\n    getDistanceFromLatLonInKm(lat1, lon1, lat2, lon2) {\n      var R = 6371; // Radius of the earth in km\n      var dLat = this.deg2rad(lat2 - lat1); // deg2rad below\n      var dLon = this.deg2rad(lon2 - lon1);\n      var a =\n        Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n        Math.cos(this.deg2rad(lat1)) *\n          Math.cos(this.deg2rad(lat2)) *\n          Math.sin(dLon / 2) *\n          Math.sin(dLon / 2);\n      var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n      var d = R * c; // Distance in km\n      return d;\n    },\n    deg2rad(deg) {\n      return deg * (Math.PI / 180);\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\n@media only screen and (min-width: 600px) {\n  section {\n    flex-grow: 1;\n    margin-top: 50px;\n    display: flex;\n    // align-items: baseline;\n    flex-direction: column;\n    .filter-container {\n      // margin-top: 37px;\n      margin-top: -70px;\n      width: 100%;\n      position: fixed;\n      z-index: 111;\n      background-color: unset;\n      padding: 20px;\n      -webkit-transition: 0.3s;\n      transition: 0.3s;\n    }\n  }\n}\nsection {\n  .group-list-container {\n    margin-top: 50px;\n    max-width: 1200px;\n    margin: 0 auto;\n    padding: 40px 30px 0 30px;\n    text-align: center;\n    margin-bottom: 50px;\n  }\n}\n\n.group-container {\n  overflow-x: scroll;\n  overflow-y: hidden;\n  white-space: nowrap;\n  margin-bottom: 50px;\n  display: flex;\n  position: relative;\n  transition: 0.3s;\n\n  border-top: 1px solid transparent;\n  border-bottom: 1px solid transparent;\n  // justify-content: center;\n}\n.groups-previews {\n  margin: 100px auto 0;\n}\nhr {\n  border: 0;\n  height: 0;\n  width: 100%;\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  border-bottom: 1px solid rgba(255, 255, 255, 0.3);\n}\nh1 {\n  text-align: center;\n  font-family: \"Franklin Gothic Medium\", \"Arial Narrow\", Arial, sans-serif;\n  color: rgb(99, 99, 99);\n  font-size: 3rem;\n  text-transform: uppercase;\n}\nh3 {\n  text-align: center;\n  font-family: \"Franklin Gothic Medium\", \"Arial Narrow\", Arial, sans-serif;\n  color: rgb(99, 99, 99);\n}\n\n@media only screen and (max-width: 600px) {\n  section {\n    width: 100%;\n  }\n}\n</style>\n"],"sourceRoot":"src/views"}]}