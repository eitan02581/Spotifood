{"remainingRequest":"C:\\Users\\Ron Elnekave\\Desktop\\spotifood\\oved\\spotifood\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Ron Elnekave\\Desktop\\spotifood\\oved\\spotifood\\frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\Ron Elnekave\\Desktop\\spotifood\\oved\\spotifood\\frontend\\src\\store\\group-store.js","dependencies":[{"path":"C:\\Users\\Ron Elnekave\\Desktop\\spotifood\\oved\\spotifood\\frontend\\src\\store\\group-store.js","mtime":1553677632296},{"path":"C:\\Users\\Ron Elnekave\\Desktop\\spotifood\\oved\\spotifood\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Ron Elnekave\\Desktop\\spotifood\\oved\\spotifood\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Ron Elnekave\\Desktop\\spotifood\\oved\\spotifood\\frontend\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find-index\";\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport groupService from '../services/GroupService.js';\nimport RecipeService from '../services/RecipeService.js';\nVue.use(Vuex);\nvar groupStore = {\n  state: {\n    groups: [],\n    group: null,\n    pendUsers: [],\n    isGroupAdmin: false\n  },\n  getters: {\n    groups: function groups(state) {\n      return state.groups;\n    },\n    group: function group(state) {\n      return state.group;\n    },\n    pendUsers: function pendUsers(state) {\n      return state.pendUsers;\n    },\n    groupAdmin: function groupAdmin(state) {\n      return state.groupAdmin;\n    },\n    isGroupAdmin: function isGroupAdmin(state) {\n      return state.isGroupAdmin;\n    }\n  },\n  mutations: {\n    cleanGroup: function cleanGroup(state) {\n      state.group = null;\n    },\n    setGroups: function setGroups(state, _ref) {\n      var groups = _ref.groups;\n      state.groups = groups;\n    },\n    setGroup: function setGroup(state, _ref2) {\n      var group = _ref2.group;\n      state.group = group;\n    },\n    setPendUsers: function setPendUsers(state, _ref3) {\n      var pendUsers = _ref3.pendUsers;\n      state.pendUsers = pendUsers;\n    },\n    removeUserFromGroup: function removeUserFromGroup(state, _ref4) {\n      var userId = _ref4.userId;\n      console.log(userId);\n      state.group.users = state.group.users.filter(function (user) {\n        return user !== userId;\n      });\n    },\n    removeRecipeFromGroup: function removeRecipeFromGroup(state, _ref5) {\n      var recipeId = _ref5.recipeId;\n      var recipeIdx = state.group.recipes.findIndex(function (recipe) {\n        return recipe._id === recipeId;\n      });\n      state.group.recipes.splice(recipeIdx, 1);\n    },\n    setAdminObj: function setAdminObj(state, _ref6) {\n      var admin = _ref6.admin;\n      state.group.admin = admin;\n    },\n    setIsGroupAdmin: function setIsGroupAdmin(state, _ref7) {\n      var bool = _ref7.bool;\n      state.isGroupAdmin = bool;\n    }\n  },\n  actions: {\n    getGroups: function getGroups(_ref8) {\n      var commit = _ref8.commit;\n      return groupService.query().then(function (groups) {\n        return commit({\n          type: 'setGroups',\n          groups: groups\n        });\n      });\n    },\n    filterGroups: function filterGroups(_ref9, _ref10) {\n      var commit = _ref9.commit;\n      var filterBy = _ref10.filterBy;\n      groupService.query(filterBy).then(function (groups) {\n        commit({\n          type: 'setGroups',\n          groups: groups\n        });\n      });\n    },\n    // getGroup({ commit }, { groupId }) {\n    //     return groupService.getById(groupId).then((group) => {\n    //         commit({ type: 'setGroup', group })\n    //     })\n    // },    }\n    getGroupById: function getGroupById(_ref11, _ref12) {\n      var commit = _ref11.commit,\n          state = _ref11.state;\n      var groupId = _ref12.groupId;\n      commit({\n        type: 'cleanGroup'\n      });\n      return groupService.getById(groupId).then(function (group) {\n        commit({\n          type: 'setGroup',\n          group: group\n        });\n        commit({\n          type: 'setPendUsers',\n          pendUsers: group.pendingUsers\n        });\n        return group;\n      });\n    },\n    removeRecipeFromGroup: function removeRecipeFromGroup(_ref13, _ref14) {\n      var commit = _ref13.commit;\n      var recipeId = _ref14.recipeId,\n          groupId = _ref14.groupId;\n      groupService.removeRecipeFromGroup(recipeId, groupId).then(function () {\n        return commit({\n          type: 'removeRecipeFromGroup',\n          recipeId: recipeId\n        });\n      });\n    },\n    addGroup: function addGroup(_ref15, _ref16) {\n      var commit = _ref15.commit,\n          state = _ref15.state;\n      var group = _ref16.group;\n      return groupService.add(group).then(function (newGroup) {\n        commit({\n          type: 'setGroup',\n          newGroup: newGroup\n        });\n        return newGroup;\n      });\n    },\n    askJoinGroup: function askJoinGroup(_ref17, _ref18) {\n      var commit = _ref17.commit;\n      var ids = _ref18.ids;\n      return groupService.askJoinGroup(ids).then(function () {\n        'asked successfuly';\n      });\n    },\n    removeUserFromGroup: function removeUserFromGroup(_ref19, _ref20) {\n      var commit = _ref19.commit;\n      var ids = _ref20.ids;\n      return groupService.removeUserFromGroup(ids).then(function () {\n        // make it reactive\n        commit({\n          type: 'removeUserFromGroup',\n          userId: ids.userId\n        });\n      });\n    },\n    acceptUserToGroup: function acceptUserToGroup(_ref21, _ref22) {\n      var commit = _ref21.commit;\n      var ids = _ref22.ids;\n      return groupService.addUserToGroup(ids).then(function (res) {\n        return res;\n      });\n    },\n    declineUserRequest: function declineUserRequest(_ref23, _ref24) {\n      var commit = _ref23.commit;\n      var ids = _ref24.ids;\n      return groupService.declineUserRequest(ids).then(function (res) {\n        return res;\n      });\n    }\n  }\n};\nexport default groupStore;",{"version":3,"sources":["C:\\Users\\Ron Elnekave\\Desktop\\spotifood\\oved\\spotifood\\frontend\\src\\store\\group-store.js"],"names":["Vue","Vuex","groupService","RecipeService","use","groupStore","state","groups","group","pendUsers","isGroupAdmin","getters","groupAdmin","mutations","cleanGroup","setGroups","setGroup","setPendUsers","removeUserFromGroup","userId","console","log","users","filter","user","removeRecipeFromGroup","recipeId","recipeIdx","recipes","findIndex","recipe","_id","splice","setAdminObj","admin","setIsGroupAdmin","bool","actions","getGroups","commit","query","then","type","filterGroups","filterBy","getGroupById","groupId","getById","pendingUsers","addGroup","add","newGroup","askJoinGroup","ids","acceptUserToGroup","addUserToGroup","res","declineUserRequest"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\n\r\nimport groupService from '../services/GroupService.js'\r\nimport RecipeService from '../services/RecipeService.js';\r\n\r\nVue.use(Vuex)\r\n\r\nconst groupStore = {\r\n    state: {\r\n        groups: [],\r\n        group: null,\r\n        pendUsers: [],\r\n        isGroupAdmin:false\r\n\r\n    }, getters: {\r\n        groups(state) {\r\n            return state.groups\r\n        },\r\n        group(state) {\r\n            return state.group\r\n        },\r\n        pendUsers(state) {\r\n            return state.pendUsers\r\n        },\r\n        groupAdmin(state) {\r\n            return state.groupAdmin\r\n        },\r\n        isGroupAdmin(state) {\r\n            return state.isGroupAdmin\r\n        }\r\n    },\r\n    mutations: {\r\n        cleanGroup(state) {\r\n            state.group = null\r\n        },\r\n        setGroups(state, { groups }) {\r\n            state.groups = groups\r\n        },\r\n        setGroup(state, { group }) {\r\n            state.group = group\r\n        },\r\n        setPendUsers(state, { pendUsers }) {\r\n            state.pendUsers = pendUsers\r\n        },\r\n        removeUserFromGroup(state, { userId }) {\r\n            console.log(userId);\r\n\r\n            state.group.users = state.group.users.filter(user => user !== userId)\r\n        },\r\n        removeRecipeFromGroup(state, { recipeId }) {\r\n            let recipeIdx = state.group.recipes.findIndex(recipe => recipe._id === recipeId)\r\n            state.group.recipes.splice(recipeIdx, 1)\r\n        },\r\n        setAdminObj(state, { admin }) {\r\n            state.group.admin = admin\r\n        },\r\n        setIsGroupAdmin(state, { bool }) {\r\n            state.isGroupAdmin = bool\r\n        }\r\n    },\r\n    actions: {\r\n        getGroups({ commit }) {\r\n            return groupService.query().then(groups => commit({ type: 'setGroups', groups }))\r\n        },\r\n        filterGroups({ commit }, { filterBy }) {\r\n            groupService.query(filterBy)\r\n                .then((groups) => { commit({ type: 'setGroups', groups }) })\r\n        },\r\n        // getGroup({ commit }, { groupId }) {\r\n        //     return groupService.getById(groupId).then((group) => {\r\n        //         commit({ type: 'setGroup', group })\r\n        //     })\r\n        // },    }\r\n        getGroupById({ commit, state }, { groupId }) {\r\n            commit({ type: 'cleanGroup' })\r\n            return groupService.getById(groupId)\r\n                .then(group => {\r\n                    commit({ type: 'setGroup', group })\r\n                    commit({ type: 'setPendUsers', pendUsers: group.pendingUsers })\r\n                    return group\r\n                })\r\n        },\r\n\r\n        removeRecipeFromGroup({ commit }, { recipeId, groupId }) {\r\n            groupService.removeRecipeFromGroup(recipeId, groupId)\r\n                .then(() => commit({ type: 'removeRecipeFromGroup', recipeId }))\r\n        },\r\n        addGroup({ commit, state }, { group }) {\r\n            return groupService.add(group)\r\n                .then(newGroup => {\r\n                    commit({ type: 'setGroup', newGroup })\r\n                    return newGroup\r\n                })\r\n        },\r\n        askJoinGroup({ commit }, { ids }) {\r\n            return groupService.askJoinGroup(ids).then(() => { 'asked successfuly' })\r\n        },\r\n        removeUserFromGroup({ commit }, { ids }) {\r\n            return groupService.removeUserFromGroup(ids).then(() => {\r\n                // make it reactive\r\n                commit({ type: 'removeUserFromGroup', userId: ids.userId })\r\n            })\r\n        },\r\n        acceptUserToGroup({ commit }, { ids }) {\r\n            return groupService.addUserToGroup(ids).then((res) => res)\r\n\r\n        },\r\n        declineUserRequest({ commit }, { ids }) {\r\n            return groupService.declineUserRequest(ids).then((res) => res)\r\n        },\r\n\r\n    }\r\n}\r\n\r\nexport default groupStore\r\n"]}]}