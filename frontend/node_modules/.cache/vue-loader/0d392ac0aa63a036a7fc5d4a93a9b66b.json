{"remainingRequest":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yovel/Desktop/sprint 4/Spotifood/frontend/src/components/groups/group-details/pending-users-cmp.vue?vue&type=style&index=0&id=61e03245&scoped=true&lang=scss&","dependencies":[{"path":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/src/components/groups/group-details/pending-users-cmp.vue","mtime":1553770155761},{"path":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.title {\n  h1 {\n    text-align: center;\n    margin-bottom: 10px;\n    color: #607d8b;\n  }\n}\n.pending-container {\n  width: 100%;\n  height: 100%;\n  background-color: white;\n  padding: 12px;\n  border-radius: 8px;\n  display: flex;\n  overflow: scroll;\n}\n.user-container {\n  text-align: center;\n  margin-left: 20px;\n  margin-right: 20px;\n  .info-container {\n    .country {\n      color: #f44336;\n    }\n    .name {\n      color: #607d8b;\n    }\n    .img-container {\n      img {\n        width: 50px;\n        border-radius: 50px;\n      }\n    }\n  }\n}\n\n@media only screen and (max-width: 600px) {\n  section {\n    margin-top: 76px;\n  }\n}\n",{"version":3,"sources":["pending-users-cmp.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"pending-users-cmp.vue","sourceRoot":"src/components/groups/group-details","sourcesContent":["<template>\n  <section v-if=\"users.length >= 1\">\n    <div class=\"title\">\n      <h1>Pending Users</h1>\n    </div>\n    <div class=\"pending-container\">\n      <div class=\"user-container\" v-for=\"user in users\" :key=\"user._id\">\n        <div class=\"info-container\">\n          <div class=\"name\">{{user.username}}</div>\n          <div class=\"country\">{{user.country}}</div>\n          <div class=\"img-container\">\n            <img :src=\"user.img\" alt>\n          </div>\n        </div>\n        <div class=\"request-container\">\n          <el-button @click=\"onAcceptUser(user)\" type=\"success\" icon=\"el-icon-check\" circle></el-button>\n          <el-button @click=\"onDeclineUser(user)\" type=\"danger\" icon=\"el-icon-delete\" circle></el-button>\n        </div>\n      </div>\n    </div>\n    <div class=\"action-status-container\" v-if=\"pendingMsg\">{{pendingMsg}}</div>\n  </section>\n</template>\n\n<script>\nexport default {\n  props: {\n    pendUsers: {\n      type: Array\n    },\n    groupId: {\n      type: String\n    }\n  },\n  data() {\n    return {\n      users: [],\n      pendingMsg: null\n    };\n  },\n  created() {\n    this.pendUsers.forEach(userId => {\n      console.log(\"Problem is Here?\");\n      this.$store.dispatch({ type: \"getUserById\", userId }).then(user => {\n        // var user = this.$store.getters.user;\n        this.users.push(user);\n      });\n    });\n  },\n  methods: {\n    onAcceptUser(user) {\n      this.$store\n        .dispatch({\n          type: \"acceptUserToGroup\",\n          ids: { userId: user._id, groupId: this.groupId }\n        })\n        .then(res => {\n          // update user's group array\n          this.$store\n            .dispatch({\n              type: \"addGroupToUser\",\n              ids: { userId: user._id, groupId: this.groupId }\n            })\n            .then(() => this.$toast.Success(`${user.username} Added`));\n          // show message\n          // this.showMsg(true, user);\n\n          // remove user from users\n          // TODO: FIX BUG WHEN ACC OR DEC ON ONE , ALL THE PENDING USERS DISAPPEAR\n          this.users = this.users.filter(user => user._id !== user._id);\n        });\n    },\n    onDeclineUser(user) {\n      this.$store\n        .dispatch({\n          type: \"declineUserRequest\",\n          ids: { userId: user._id, groupId: this.groupId }\n        })\n        .then(res => {\n          this.showMsg(false, user);\n          this.users = this.users.filter(user => user._id !== user._id);\n        });\n    },\n    showMsg(state, user) {\n      this.pendingMsg = state\n        ? `${user.nickName} added!`\n        : `${user.nickName} declined!`;\n      setTimeout(() => {\n        this.pendingMsg = null;\n      }, 1200);\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\n.title {\n  h1 {\n    text-align: center;\n    margin-bottom: 10px;\n    color: #607d8b;\n  }\n}\n.pending-container {\n  width: 100%;\n  height: 100%;\n  background-color: white;\n  padding: 12px;\n  border-radius: 8px;\n  display: flex;\n  overflow: scroll;\n}\n.user-container {\n  text-align: center;\n  margin-left: 20px;\n  margin-right: 20px;\n  .info-container {\n    .country {\n      color: #f44336;\n    }\n    .name {\n      color: #607d8b;\n    }\n    .img-container {\n      img {\n        width: 50px;\n        border-radius: 50px;\n      }\n    }\n  }\n}\n\n@media only screen and (max-width: 600px) {\n  section {\n    margin-top: 76px;\n  }\n}\n</style>\n"]}]}