{"remainingRequest":"C:\\Users\\Ron Elnekave\\Desktop\\spotifood\\oved\\spotifood\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Ron Elnekave\\Desktop\\spotifood\\oved\\spotifood\\frontend\\src\\views\\group-add.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Ron Elnekave\\Desktop\\spotifood\\oved\\spotifood\\frontend\\src\\views\\group-add.vue","mtime":1553781751874},{"path":"C:\\Users\\Ron Elnekave\\Desktop\\spotifood\\oved\\spotifood\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Ron Elnekave\\Desktop\\spotifood\\oved\\spotifood\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Ron Elnekave\\Desktop\\spotifood\\oved\\spotifood\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Ron Elnekave\\Desktop\\spotifood\\oved\\spotifood\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport FunctionalCalendar from \"vue-functional-calendar\";\r\nimport GroupService from \"../services/GroupService.js\";\r\nimport uploadService from \"../services/UploadService\";\r\nimport { gmapApi } from \"vue2-google-maps\";\r\nimport moment from \"moment\";\r\n\r\nexport default {\r\n  components: {\r\n    FunctionalCalendar\r\n  },\r\n  data() {\r\n    return {\r\n      isUploading: false,\r\n      searchInput: \"\",\r\n      currLoc: null,\r\n      markerPos: null,\r\n      group: {\r\n        title: \"\",\r\n        location: null,\r\n        time: null,\r\n        place: null,\r\n        cuisineType: [],\r\n        guests: 1,\r\n        eventType: \"\",\r\n        img: \"\",\r\n        hashtags: [],\r\n        description: \"\"\r\n      },\r\n      eventType: [\"Breakfast\", \"Brunch\", \"Lunch\", \"Dinner\", \"Other\"],\r\n      isLoading: false\r\n    };\r\n  },\r\n  created() {\r\n    if (navigator.geolocation) {\r\n      // console.log(\"created\");\r\n      setTimeout(() => {\r\n        navigator.geolocation.getCurrentPosition(this.setUserLocation);\r\n      }, 1500);\r\n    }\r\n  },\r\n  computed: {\r\n    google: gmapApi\r\n  },\r\n  methods: {\r\n    cancelGroup() {\r\n      this.$router.push(\"/\");\r\n    },\r\n    setUserLocation(position) {\r\n      // console.log(\"user location is\", position);\r\n      this.currLoc = {\r\n        lat: position.coords.latitude,\r\n        lng: position.coords.longitude\r\n      };\r\n      this.markerPos = this.currLoc;\r\n    },\r\n    getLatLngFromEvent(event) {\r\n      return {\r\n        lat: event.latLng.lat(),\r\n        lng: event.latLng.lng()\r\n      };\r\n    },\r\n    setPlace(place) {\r\n      if (Object.keys(place).length < 2) {\r\n        // console.log(Object.keys(place).length);\r\n        return;\r\n      }\r\n      // console.log(place);\r\n      this.group.location = {\r\n        lat: place.geometry.location.lat(),\r\n        lng: place.geometry.location.lng()\r\n      };\r\n      this.$refs.groupMap.panTo(this.group.location);\r\n      this.markerPos = this.group.location;\r\n      let country = place.address_components.find(\r\n        adr => adr.types[0] === \"country\"\r\n      );\r\n      country = {\r\n        longName: country.long_name,\r\n        shortName: country.short_name\r\n      };\r\n      let city = place.address_components.find(\r\n        adr => adr.types[0] === \"locality\"\r\n      );\r\n      this.group.place = {\r\n        country,\r\n        city: city.long_name\r\n      };\r\n    },\r\n    isInValid() {\r\n      let vals = Object.values(this.group);\r\n      let emptyVal = vals.findIndex(val => !val);\r\n\r\n      return emptyVal !== -1 || !this.group.cuisineType.length;\r\n    },\r\n    async createGroup() {\r\n      this.isLoading = true;\r\n\r\n      if (!this.group.img) {\r\n        this.group.img = `https://picsum.photos/200/300/${this.group.title}`;\r\n      }\r\n      if (this.isInValid()) {\r\n        // console.log(\"invalid group\");\r\n        return;\r\n      }\r\n      let admin = this.$store.getters.user;\r\n      this.group.admin = admin._id;\r\n      try {\r\n        const newGroup = await this.$store.dispatch(\"addGroup\", {\r\n          group: this.group\r\n        });\r\n        this.$toast.Success(\"Group Added Successfully\");\r\n        this.$router.push(\"/groups/\" + newGroup._id);\r\n        this.isLoading = false;\r\n      } catch (e) {\r\n        // console.log(e);\r\n        this.$toast.Error(\"Something went wrong\");\r\n      }\r\n    },\r\n    uploadImg(input) {\r\n      this.isUploading = true;\r\n      // console.log(input.file);\r\n      const formData = new FormData();\r\n      formData.append(\"file\", input.file);\r\n      uploadService.uploadImg(formData).then(url => {\r\n        // console.log(url);\r\n        this.group.img = url;\r\n        // console.log(this.group.img); \r\n        this.isUploading = false;\r\n      });\r\n    }\r\n    ////////////////////////////////\r\n    // handleAvatarSuccess(res, file) {\r\n    //   this.imageUrl = URL.createObjectURL(file.raw);\r\n    // },\r\n    // beforeAvatarUpload(file) {\r\n    //   const isJPG = file.type === \"image/jpeg\";\r\n    //   const isLt2M = file.size / 1024 / 1024 < 2;\r\n    //\r\n    //   if (!isJPG) {\r\n    //     this.$message.error(\"Avatar picture must be JPG format!\");\r\n    //   }\r\n    //   if (!isLt2M) {\r\n    //     this.$message.error(\"Avatar picture size can not exceed 2MB!\");\r\n    //   }\r\n    //   return isJPG && isLt2M;\r\n    // }\r\n  }\r\n};\r\n",{"version":3,"sources":["group-add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"group-add.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <!-- <section class=\"add-group-form\" v-loading=\"isLoading\"> -->\r\n  <el-form class=\"form-text-input\" ref=\"group\" label-width=\"120px\">\r\n    <!-- Form Label -->\r\n    <el-form-item>\r\n      <h1>Create Event</h1>\r\n    </el-form-item>\r\n    <!-- Group Name Input -->\r\n    <el-form-item label=\"Event Name\">\r\n      <el-input v-model=\"group.title\"></el-input>\r\n    </el-form-item>\r\n    <!-- Group Time Input -->\r\n    <el-form-item label=\"Event time\">\r\n      <el-date-picker\r\n        v-model=\"group.time\"\r\n        type=\"datetime\"\r\n        value-format=\"timestamp\"\r\n        placeholder=\"Select date and time\"\r\n      ></el-date-picker>\r\n    </el-form-item>\r\n    <!-- Group Description -->\r\n    <el-form-item label=\"Description\">\r\n      <el-input\r\n        type=\"textarea\"\r\n        :autosize=\"{ minRows: 3, maxRows: 6 }\"\r\n        placeholder=\"Enter Description\"\r\n        v-model=\"group.description\"\r\n      ></el-input>\r\n    </el-form-item>\r\n    <!-- GUESTS AMOUNT -->\r\n    <el-form-item label=\"Guests\">\r\n      <el-input-number v-model=\"group.guests\" :step=\"1\"></el-input-number>\r\n    </el-form-item>\r\n    <!-- EVENT TYPE -->\r\n    <el-form-item label=\"Event Type\">\r\n      <el-select v-model=\"group.eventType\" filterable placeholder=\"Select Event\">\r\n        <el-option v-for=\"event in eventType\" :key=\"event\" :label=\"event\" :value=\"event\"></el-option>\r\n      </el-select>\r\n    </el-form-item>\r\n    <!-- CUISINE TYPE -->\r\n    <el-form-item label=\"Cuisine Type\">\r\n      <el-select multiple v-model=\"group.cuisineType\" filterable placeholder=\"Select Cuisine\">\r\n        <el-option\r\n          v-for=\"cuisine in this.$store.getters.categories\"\r\n          :key=\"cuisine\"\r\n          :label=\"cuisine\"\r\n          :value=\"cuisine\"\r\n        ></el-option>\r\n      </el-select>\r\n    </el-form-item>\r\n    <!-- HASHTAGS -->\r\n    <el-form-item label=\"Tags\">\r\n      <el-select\r\n        v-model=\"group.hashtags\"\r\n        multiple\r\n        filterable\r\n        allow-create\r\n        default-first-option\r\n        placeholder=\"Add Tags\"\r\n      ></el-select>\r\n      <!-- <button v-if=\"value10.length >=1\" @click=\"clearSelect\" class=\"delete\">X</button> -->\r\n    </el-form-item>\r\n    <!-- LOCATION -->\r\n    <el-form-item label=\"Location\">\r\n      <GmapAutocomplete class=\"el-input__inner\" language=\"en\" @place_changed=\"setPlace\"></GmapAutocomplete>\r\n    </el-form-item>\r\n    <!-- UPLOAD PROFILE IMG -->\r\n    <el-form-item label=\"Image\">\r\n      <el-upload\r\n        v-if=\"!isUploading\"\r\n        class=\"avatar-uploader\"\r\n        action=\"squeeze rubber duck\"\r\n        :http-request=\"uploadImg\"\r\n        :show-file-list=\"false\"\r\n      >\r\n        <div style=\"width: 100px;height:100px\" v-if=\"isUploading\">\r\n          <i class=\"el-icon-loading\"></i>\r\n        </div>\r\n        <!-- :before-upload=\"beforeAvatarUpload\"\r\n        :on-success=\"handleAvatarSuccess\"-->\r\n        <img v-if=\"group.img\" :src=\"group.img\" class=\"avatar\">\r\n        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n      </el-upload>\r\n      <div class=\"loading\" v-else>\r\n        <i class=\"el-icon-loading\"></i>\r\n      </div>\r\n    </el-form-item>\r\n    <!-- MAP -->\r\n    <div class=\"map-container\">\r\n      <img v-if=\"!currLoc\" src=\"@/assets/loading_imgs/map.gif\" alt=\"map_loading\">\r\n      <GmapMap v-if=\"currLoc\" :center=\"currLoc\" :zoom=\"10\" ref=\"groupMap\" style>\r\n        <GmapMarker :position=\"markerPos\" :clickable=\"true\" :draggable=\"true\"/>\r\n      </GmapMap>\r\n    </div>\r\n    <div class=\"btns\">\r\n      <el-button type=\"primary\" @click=\"createGroup\">Create</el-button>\r\n      <el-button @click=\"cancelGroup\">Cancel</el-button>\r\n    </div>\r\n  </el-form>\r\n  <!-- </section> -->\r\n</template>\r\n\r\n<script>\r\nimport FunctionalCalendar from \"vue-functional-calendar\";\r\nimport GroupService from \"../services/GroupService.js\";\r\nimport uploadService from \"../services/UploadService\";\r\nimport { gmapApi } from \"vue2-google-maps\";\r\nimport moment from \"moment\";\r\n\r\nexport default {\r\n  components: {\r\n    FunctionalCalendar\r\n  },\r\n  data() {\r\n    return {\r\n      isUploading: false,\r\n      searchInput: \"\",\r\n      currLoc: null,\r\n      markerPos: null,\r\n      group: {\r\n        title: \"\",\r\n        location: null,\r\n        time: null,\r\n        place: null,\r\n        cuisineType: [],\r\n        guests: 1,\r\n        eventType: \"\",\r\n        img: \"\",\r\n        hashtags: [],\r\n        description: \"\"\r\n      },\r\n      eventType: [\"Breakfast\", \"Brunch\", \"Lunch\", \"Dinner\", \"Other\"],\r\n      isLoading: false\r\n    };\r\n  },\r\n  created() {\r\n    if (navigator.geolocation) {\r\n      // console.log(\"created\");\r\n      setTimeout(() => {\r\n        navigator.geolocation.getCurrentPosition(this.setUserLocation);\r\n      }, 1500);\r\n    }\r\n  },\r\n  computed: {\r\n    google: gmapApi\r\n  },\r\n  methods: {\r\n    cancelGroup() {\r\n      this.$router.push(\"/\");\r\n    },\r\n    setUserLocation(position) {\r\n      // console.log(\"user location is\", position);\r\n      this.currLoc = {\r\n        lat: position.coords.latitude,\r\n        lng: position.coords.longitude\r\n      };\r\n      this.markerPos = this.currLoc;\r\n    },\r\n    getLatLngFromEvent(event) {\r\n      return {\r\n        lat: event.latLng.lat(),\r\n        lng: event.latLng.lng()\r\n      };\r\n    },\r\n    setPlace(place) {\r\n      if (Object.keys(place).length < 2) {\r\n        // console.log(Object.keys(place).length);\r\n        return;\r\n      }\r\n      // console.log(place);\r\n      this.group.location = {\r\n        lat: place.geometry.location.lat(),\r\n        lng: place.geometry.location.lng()\r\n      };\r\n      this.$refs.groupMap.panTo(this.group.location);\r\n      this.markerPos = this.group.location;\r\n      let country = place.address_components.find(\r\n        adr => adr.types[0] === \"country\"\r\n      );\r\n      country = {\r\n        longName: country.long_name,\r\n        shortName: country.short_name\r\n      };\r\n      let city = place.address_components.find(\r\n        adr => adr.types[0] === \"locality\"\r\n      );\r\n      this.group.place = {\r\n        country,\r\n        city: city.long_name\r\n      };\r\n    },\r\n    isInValid() {\r\n      let vals = Object.values(this.group);\r\n      let emptyVal = vals.findIndex(val => !val);\r\n\r\n      return emptyVal !== -1 || !this.group.cuisineType.length;\r\n    },\r\n    async createGroup() {\r\n      this.isLoading = true;\r\n\r\n      if (!this.group.img) {\r\n        this.group.img = `https://picsum.photos/200/300/${this.group.title}`;\r\n      }\r\n      if (this.isInValid()) {\r\n        // console.log(\"invalid group\");\r\n        return;\r\n      }\r\n      let admin = this.$store.getters.user;\r\n      this.group.admin = admin._id;\r\n      try {\r\n        const newGroup = await this.$store.dispatch(\"addGroup\", {\r\n          group: this.group\r\n        });\r\n        this.$toast.Success(\"Group Added Successfully\");\r\n        this.$router.push(\"/groups/\" + newGroup._id);\r\n        this.isLoading = false;\r\n      } catch (e) {\r\n        // console.log(e);\r\n        this.$toast.Error(\"Something went wrong\");\r\n      }\r\n    },\r\n    uploadImg(input) {\r\n      this.isUploading = true;\r\n      // console.log(input.file);\r\n      const formData = new FormData();\r\n      formData.append(\"file\", input.file);\r\n      uploadService.uploadImg(formData).then(url => {\r\n        // console.log(url);\r\n        this.group.img = url;\r\n        // console.log(this.group.img); \r\n        this.isUploading = false;\r\n      });\r\n    }\r\n    ////////////////////////////////\r\n    // handleAvatarSuccess(res, file) {\r\n    //   this.imageUrl = URL.createObjectURL(file.raw);\r\n    // },\r\n    // beforeAvatarUpload(file) {\r\n    //   const isJPG = file.type === \"image/jpeg\";\r\n    //   const isLt2M = file.size / 1024 / 1024 < 2;\r\n    //\r\n    //   if (!isJPG) {\r\n    //     this.$message.error(\"Avatar picture must be JPG format!\");\r\n    //   }\r\n    //   if (!isLt2M) {\r\n    //     this.$message.error(\"Avatar picture size can not exceed 2MB!\");\r\n    //   }\r\n    //   return isJPG && isLt2M;\r\n    // }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\r\n  border: 1px dashed #2196f3;\r\n  border-radius: 10px;\r\n}\r\n.avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n// section {\r\n//   margin: 80px auto;\r\n//   padding: 20px 10px;\r\n//   border-radius: 10px;\r\n//   width: 80%;\r\n//   @media (min-width: 850px) {\r\n//     min-width:850px;\r\n//   }\r\n// display: flex;\r\n// flex-direction: column;\r\n// justify-content: space-between;\r\n.form-text-input {\r\n  border: 1px solid rgb(223, 223, 223);\r\n  grid-column-gap: 10px;\r\n  width:100%;\r\n  min-width: 200px;\r\n  margin: 80px auto;\r\n  padding: 15px;\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  @media (min-width: 850px) {\r\n  width: 1000px;\r\n    grid-template-columns: 1fr 1fr;\r\n  }\r\n  h1 {\r\n    justify-self: flex-start;\r\n    font-size: 45px;\r\n    margin: 10px;\r\n  }\r\n  :first-child {\r\n    grid-column-start: span 1;\r\n  }\r\n  @media (min-width: 850px) {\r\n    :first-child {\r\n      grid-column-start: span 2;\r\n    }\r\n  }\r\n  :nth-child(2) {\r\n    grid-column-start: 1;\r\n  }\r\n  @media (min-width: 850px) {\r\n    :nth-child(2) {\r\n      grid-column-start: 1;\r\n    }\r\n  }\r\n}\r\n.vue-map-container {\r\n  border: 1px solid rgb(219, 219, 219);\r\n  width: 100%;\r\n  // max-width: 400px;\r\n  min-height: 300px;\r\n  grid-column-start: 1;\r\n  margin:10px 0;\r\n}\r\n.btns {\r\n  margin-left: 50px;\r\n  align-self: flex-end;\r\n  justify-self: flex-start;\r\n}\r\n// }\r\n.loading {\r\n  font-size: 28px;\r\n  color: #2196f3;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\r\n}\r\n</style>\r\n"]}]}