{"remainingRequest":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yovel/Desktop/sprint 4/Spotifood/frontend/src/views/group-add.vue?vue&type=style&index=0&id=dd367bae&lang=scss&scoped=true&","dependencies":[{"path":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/src/views/group-add.vue","mtime":1553790502609},{"path":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yovel/Desktop/sprint 4/Spotifood/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n  border: 1px dashed #2196f3;\n  border-radius: 10px;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n// section {\n//   margin: 80px auto;\n//   padding: 20px 10px;\n//   border-radius: 10px;\n//   width: 80%;\n//   @media (min-width: 850px) {\n//     min-width:850px;\n//   }\n// display: flex;\n// flex-direction: column;\n// justify-content: space-between;\n.form-text-input {\n  border: 1px solid rgb(223, 223, 223);\n  grid-column-gap: 10px;\n  width:100%;\n  min-width: 200px;\n  margin: 80px auto;\n  padding: 15px;\n  display: grid;\n  grid-template-columns: 1fr;\n  @media (min-width: 850px) {\n  width: 1000px;\n    grid-template-columns: 1fr 1fr;\n  }\n  h1 {\n    justify-self: flex-start;\n    font-size: 45px;\n    margin: 10px;\n  }\n  :first-child {\n    grid-column-start: span 1;\n  }\n  @media (min-width: 850px) {\n    :first-child {\n      grid-column-start: span 2;\n    }\n  }\n  :nth-child(2) {\n    grid-column-start: 1;\n  }\n  @media (min-width: 850px) {\n    :nth-child(2) {\n      grid-column-start: 1;\n    }\n  }\n}\n.vue-map-container {\n  border: 1px solid rgb(219, 219, 219);\n  width: 100%;\n  // max-width: 400px;\n  min-height: 300px;\n  grid-column-start: 1;\n  margin:10px 0;\n}\n.btns {\n  margin-left: 50px;\n  align-self: flex-end;\n  justify-self: flex-start;\n}\n// }\n.loading {\n  font-size: 28px;\n  color: #2196f3;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n",{"version":3,"sources":["group-add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"group-add.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <!-- <section class=\"add-group-form\" v-loading=\"isLoading\"> -->\n  <el-form class=\"form-text-input\" ref=\"group\" label-width=\"120px\">\n    <!-- Form Label -->\n    <el-form-item>\n      <h1>Create Event</h1>\n    </el-form-item>\n    <!-- Group Name Input -->\n    <el-form-item label=\"Event Name\">\n      <el-input v-model=\"group.title\"></el-input>\n    </el-form-item>\n    <!-- Group Time Input -->\n    <el-form-item label=\"Event time\">\n      <el-date-picker\n        v-model=\"group.time\"\n        type=\"datetime\"\n        value-format=\"timestamp\"\n        placeholder=\"Select date and time\"\n      ></el-date-picker>\n    </el-form-item>\n    <!-- Group Description -->\n    <el-form-item label=\"Description\">\n      <el-input\n        type=\"textarea\"\n        :autosize=\"{ minRows: 3, maxRows: 6 }\"\n        placeholder=\"Enter Description\"\n        v-model=\"group.description\"\n      ></el-input>\n    </el-form-item>\n    <!-- GUESTS AMOUNT -->\n    <el-form-item label=\"Guests\">\n      <el-input-number v-model=\"group.guests\" :step=\"1\"></el-input-number>\n    </el-form-item>\n    <!-- EVENT TYPE -->\n    <el-form-item label=\"Event Type\">\n      <el-select v-model=\"group.eventType\" filterable placeholder=\"Select Event\">\n        <el-option v-for=\"event in eventType\" :key=\"event\" :label=\"event\" :value=\"event\"></el-option>\n      </el-select>\n    </el-form-item>\n    <!-- CUISINE TYPE -->\n    <el-form-item label=\"Cuisine Type\">\n      <el-select multiple v-model=\"group.cuisineType\" filterable placeholder=\"Select Cuisine\">\n        <el-option\n          v-for=\"cuisine in this.$store.getters.categories\"\n          :key=\"cuisine\"\n          :label=\"cuisine\"\n          :value=\"cuisine\"\n        ></el-option>\n      </el-select>\n    </el-form-item>\n    <!-- HASHTAGS -->\n    <el-form-item label=\"Tags\">\n      <el-select\n        v-model=\"group.hashtags\"\n        multiple\n        filterable\n        allow-create\n        default-first-option\n        placeholder=\"Add Tags\"\n      ></el-select>\n      <!-- <button v-if=\"value10.length >=1\" @click=\"clearSelect\" class=\"delete\">X</button> -->\n    </el-form-item>\n    <!-- LOCATION -->\n    <el-form-item label=\"Location\">\n      <GmapAutocomplete class=\"el-input__inner\" language=\"en\" @place_changed=\"setPlace\"></GmapAutocomplete>\n    </el-form-item>\n    <!-- UPLOAD PROFILE IMG -->\n    <el-form-item label=\"Image\">\n      <el-upload\n        v-if=\"!isUploading\"\n        class=\"avatar-uploader\"\n        action=\"squeeze rubber duck\"\n        :http-request=\"uploadImg\"\n        :show-file-list=\"false\"\n      >\n        <div style=\"width: 100px;height:100px\" v-if=\"isUploading\">\n          <i class=\"el-icon-loading\"></i>\n        </div>\n        <!-- :before-upload=\"beforeAvatarUpload\"\n        :on-success=\"handleAvatarSuccess\"-->\n        <img v-if=\"group.img\" :src=\"group.img\" class=\"avatar\">\n        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n      </el-upload>\n      <div class=\"loading\" v-else>\n        <i class=\"el-icon-loading\"></i>\n      </div>\n    </el-form-item>\n    <!-- MAP -->\n    <div class=\"map-container\">\n      <img v-if=\"!currLoc\" src=\"@/assets/loading_imgs/map.gif\" alt=\"map_loading\">\n      <GmapMap v-if=\"currLoc\" :center=\"currLoc\" :zoom=\"10\" ref=\"groupMap\" style>\n        <GmapMarker :position=\"markerPos\" :clickable=\"true\" :draggable=\"true\"/>\n      </GmapMap>\n    </div>\n    <div class=\"btns\">\n      <el-button type=\"primary\" @click=\"createGroup\">Create</el-button>\n      <el-button @click=\"cancelGroup\">Cancel</el-button>\n    </div>\n  </el-form>\n  <!-- </section> -->\n</template>\n\n<script>\nimport FunctionalCalendar from \"vue-functional-calendar\";\nimport GroupService from \"../services/GroupService.js\";\nimport uploadService from \"../services/UploadService\";\nimport { gmapApi } from \"vue2-google-maps\";\nimport moment from \"moment\";\n\nexport default {\n  components: {\n    FunctionalCalendar\n  },\n  data() {\n    return {\n      isUploading: false,\n      searchInput: \"\",\n      currLoc: null,\n      markerPos: null,\n      group: {\n        title: \"\",\n        location: null,\n        time: null,\n        place: null,\n        cuisineType: [],\n        guests: 1,\n        eventType: \"\",\n        img: \"\",\n        hashtags: [],\n        description: \"\"\n      },\n      eventType: [\"Breakfast\", \"Brunch\", \"Lunch\", \"Dinner\", \"Other\"],\n      isLoading: false\n    };\n  },\n  created() {\n    if (navigator.geolocation) {\n      // console.log(\"created\");\n      setTimeout(() => {\n        navigator.geolocation.getCurrentPosition(this.setUserLocation);\n      }, 1500);\n    }\n  },\n  computed: {\n    google: gmapApi\n  },\n  methods: {\n    cancelGroup() {\n      this.$router.push(\"/\");\n    },\n    setUserLocation(position) {\n      // console.log(\"user location is\", position);\n      this.currLoc = {\n        lat: position.coords.latitude,\n        lng: position.coords.longitude\n      };\n      this.markerPos = this.currLoc;\n    },\n    getLatLngFromEvent(event) {\n      return {\n        lat: event.latLng.lat(),\n        lng: event.latLng.lng()\n      };\n    },\n    setPlace(place) {\n      if (Object.keys(place).length < 2) {\n        // console.log(Object.keys(place).length);\n        return;\n      }\n      // console.log(place);\n      this.group.location = {\n        lat: place.geometry.location.lat(),\n        lng: place.geometry.location.lng()\n      };\n      this.$refs.groupMap.panTo(this.group.location);\n      this.markerPos = this.group.location;\n      let country = place.address_components.find(\n        adr => adr.types[0] === \"country\"\n      );\n      country = {\n        longName: country.long_name,\n        shortName: country.short_name\n      };\n      let city = place.address_components.find(\n        adr => adr.types[0] === \"locality\"\n      );\n      this.group.place = {\n        country,\n        city: city.long_name\n      };\n    },\n    isInValid() {\n      let vals = Object.values(this.group);\n      let emptyVal = vals.findIndex(val => !val);\n\n      return emptyVal !== -1 || !this.group.cuisineType.length;\n    },\n    async createGroup() {\n      this.isLoading = true;\n\n      if (!this.group.img) {\n        this.group.img = `https://picsum.photos/200/300/${this.group.title}`;\n      }\n      if (this.isInValid()) {\n        // console.log(\"invalid group\");\n        return;\n      }\n      let admin = this.$store.getters.user;\n      this.group.admin = admin._id;\n      try {\n        const newGroup = await this.$store.dispatch(\"addGroup\", {\n          group: this.group\n        });\n        this.$toast.Success(\"Group Added Successfully\");\n        this.$router.push(\"/groups/\" + newGroup._id);\n        this.isLoading = false;\n      } catch (e) {\n        // console.log(e);\n        this.$toast.Error(\"Something went wrong\");\n      }\n    },\n    uploadImg(input) {\n      this.isUploading = true;\n      // console.log(input.file);\n      const formData = new FormData();\n      formData.append(\"file\", input.file);\n      uploadService.uploadImg(formData).then(url => {\n        // console.log(url);\n        this.group.img = url;\n        // console.log(this.group.img); \n        this.isUploading = false;\n      });\n    }\n    ////////////////////////////////\n    // handleAvatarSuccess(res, file) {\n    //   this.imageUrl = URL.createObjectURL(file.raw);\n    // },\n    // beforeAvatarUpload(file) {\n    //   const isJPG = file.type === \"image/jpeg\";\n    //   const isLt2M = file.size / 1024 / 1024 < 2;\n    //\n    //   if (!isJPG) {\n    //     this.$message.error(\"Avatar picture must be JPG format!\");\n    //   }\n    //   if (!isLt2M) {\n    //     this.$message.error(\"Avatar picture size can not exceed 2MB!\");\n    //   }\n    //   return isJPG && isLt2M;\n    // }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n  border: 1px dashed #2196f3;\n  border-radius: 10px;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n// section {\n//   margin: 80px auto;\n//   padding: 20px 10px;\n//   border-radius: 10px;\n//   width: 80%;\n//   @media (min-width: 850px) {\n//     min-width:850px;\n//   }\n// display: flex;\n// flex-direction: column;\n// justify-content: space-between;\n.form-text-input {\n  border: 1px solid rgb(223, 223, 223);\n  grid-column-gap: 10px;\n  width:100%;\n  min-width: 200px;\n  margin: 80px auto;\n  padding: 15px;\n  display: grid;\n  grid-template-columns: 1fr;\n  @media (min-width: 850px) {\n  width: 1000px;\n    grid-template-columns: 1fr 1fr;\n  }\n  h1 {\n    justify-self: flex-start;\n    font-size: 45px;\n    margin: 10px;\n  }\n  :first-child {\n    grid-column-start: span 1;\n  }\n  @media (min-width: 850px) {\n    :first-child {\n      grid-column-start: span 2;\n    }\n  }\n  :nth-child(2) {\n    grid-column-start: 1;\n  }\n  @media (min-width: 850px) {\n    :nth-child(2) {\n      grid-column-start: 1;\n    }\n  }\n}\n.vue-map-container {\n  border: 1px solid rgb(219, 219, 219);\n  width: 100%;\n  // max-width: 400px;\n  min-height: 300px;\n  grid-column-start: 1;\n  margin:10px 0;\n}\n.btns {\n  margin-left: 50px;\n  align-self: flex-end;\n  justify-self: flex-start;\n}\n// }\n.loading {\n  font-size: 28px;\n  color: #2196f3;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n</style>\n"]}]}